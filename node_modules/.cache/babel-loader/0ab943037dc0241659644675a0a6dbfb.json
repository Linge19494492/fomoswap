{"ast":null,"code":"var _jsxFileName = \"/Users/zhaohongwei/Downloads/fomoswap/src/views/Detail/Detail.js\";\nimport React, { useState, useEffect } from 'react';\nimport MuiAlert from '@material-ui/lab/Alert';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport DetailItem from '../../components/DetailItem/DetailItem';\nimport MsgBox from '../../components/MsgBox/MsgBox';\nimport Loading from '../../components/Loading';\nimport { useLocation } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next'; // import tigerLogo from '../../assets/tiger-logo.png';\n\nimport tigerLogo from '../../assets/1.png';\nimport wallet from '../../tools/wallet';\nimport conf from '../../tools/conf';\nimport { sleep, getUrlParams, formatBigNumber } from '../../tools';\nimport './Detail.css';\n\nconst {\n  poolTitleImg\n} = require('../../assets/converge'); // 池子标题名字\n\n\nconst poolTitleName = {\n  usdtPoolAddress: 'USDT/TRX LP',\n  fomoPoolAddress: 'FOMO/TRX LP',\n  fomoX9PoolAddress: 'FOMOX9/TRX LP',\n  mvmPoolAddress: 'MVM/TRX LP',\n  famPoolAddress: 'FAM/TRX LP'\n};\n\nfunction Alert(props) {\n  return /*#__PURE__*/React.createElement(MuiAlert, Object.assign({\n    elevation: 6,\n    variant: \"filled\"\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 12\n    }\n  }));\n}\n\nfunction Detail() {\n  const {\n    t\n  } = useTranslation(); // 使用这个变量去区分是哪个池子，个性化设置等、比如图标之类\n  // 真不理解为什么不用 pollName 这个变量去做，非要再处理个 src 属性\n\n  const {\n    poolName\n  } = getUrlParams(useLocation().search);\n  const [show, setShow] = useState(false);\n  const [popType, setPopType] = useState(0); // 根据状态去判断当前功能、0 批准，1 解压，2质押\n\n  const [obtained, setObtained] = useState(0); // 已获得\n\n  const [pledged, setPledged] = useState(0); // 已抵押\n  // 是否批准，根据 isApproved 这个变量显示显示几个按钮，为 false 一个按钮， true 为两个按钮\n\n  const [isApproved, setApproved] = useState(false);\n  const [lpBalance, setLpBalance] = useState(0); // lp 余额\n\n  const [amountSubmitted, setAmountSubmitted] = useState(0); // 提交的金额\n\n  const [isLoading, setLoading] = useState(true); // 加载状态\n\n  const [openError, setOpenError] = React.useState(false); // 错误提示\n\n  const [errorInfo, setErrorInfo] = React.useState('This is a error!'); // 错误提信息\n  // 一起更新所有吧\n\n  const upDateAll = async () => {\n    if (wallet.getDefaultAddress().code === 0) {\n      const myAddress = wallet.getDefaultAddress().data;\n      const poolAddress = conf.pool[poolName];\n      const lpAddress = conf.lp[poolName]; // console.log(myAddress)\n      // console.log(poolAddress)\n      // console.log(lpAddress)\n\n      const [earnedRes, pledgedRes, allowanceRes, lpRes] = await Promise.all([wallet._getEarned(poolAddress), wallet._getBalanceOf(poolAddress, myAddress), wallet.allowance(lpAddress, myAddress, poolAddress), wallet._getBalanceOf(lpAddress, myAddress)]);\n      setObtained(formatBigNumber(earnedRes.data)); // if (poolName === 'cornPoolAddress') {\n      //     setPledged((Number(formatBigNumber(pledgedRes.data, 1e18))));\n      //     setLpBalance((Number(formatBigNumber(lpRes.data, 1e18))));\n      // } else {\n      //     setPledged(Number(formatBigNumber(pledgedRes.data, 1e6)));\n      //     setLpBalance(Number(formatBigNumber(lpRes.data, 1e6)));\n      // }\n\n      setPledged(Number(formatBigNumber(pledgedRes.data, 1e6)));\n      setLpBalance(Number(formatBigNumber(lpRes.data, 1e6)));\n\n      if (allowanceRes.data.comparedTo(1) > 0) {\n        setApproved(true);\n      } else {\n        setApproved(false);\n      }\n\n      setLoading(false);\n    } else {}\n  }; // 收割\n\n\n  const onclickHarvest = async () => {\n    if (Number(obtained) > 0) {\n      // 可以添加 loading 开始，其实就是控制一个变量为 true\n      console.log('开始收割');\n      await wallet.getReward(conf.pool[poolName]); // 这里可以监听错误\n\n      console.log('收割完成'); // 结束 loading 开始，其实就是控制一个变量为 false\n    }\n  }; // 轮训，更新，10 秒更新一次\n\n\n  const training = async () => {\n    await sleep(20 * 1000);\n\n    for (;;) {\n      try {\n        await sleep(8 * 1000);\n        await upDateAll();\n      } catch (err) {\n        console.error(err);\n      }\n    }\n  }; // 收割并解压\n\n\n  const onClickExit = async () => {\n    if (obtained <= 0) {\n      console.log('数量不足'); // return;\n    } else {\n      console.log('return');\n    } // 可以添加 loading 开始，其实就是控制一个变量为 true\n\n\n    console.log('开始收割并解压');\n    await wallet.exit(conf.pool[poolName]); // 这里可以监听错误\n\n    upDateAll();\n    console.log('收割并解压完成'); // 结束 loading 开始，其实就是控制一个变量为 false\n  }; // 批准授权\n\n\n  const approveAuthor = async () => {\n    try {\n      // 可以添加 loading 开始，其实就是控制一个变量为 true\n      console.log('开始批准授权');\n      await wallet.approve(conf.lp[poolName], conf.pool[poolName]); // 这里可以监听错误\n\n      upDateAll();\n      console.log('批准授权完成'); // 结束 loading 开始，其实就是控制一个变量为 false\n    } catch (err) {\n      console.error(err);\n    }\n  }; // 质押\n\n\n  const invest = async () => {\n    if (amountSubmitted <= 0) return; // 可以添加 loading 开始，其实就是控制一个变量为 true\n\n    console.log('开始质押>>>', amountSubmitted);\n    const amount = amountSubmitted; // if (poolName === 'cornPoolAddress') {\n    //     await wallet.safeInvest(conf.pool[poolName], conf.lp[poolName], (amount * 1e18)); // 这里可以监听错误\n    // } else {\n    //     await wallet.safeInvest(conf.pool[poolName], conf.lp[poolName], (amount * 1e6)); // 这里可以监听错误\n    // }\n\n    await wallet.safeInvest(conf.pool[poolName], conf.lp[poolName], amount * 1e6); // 这里可以监听错误\n    // lp 地址可能不需要，但也要传值\n\n    await sleep(50); // 区块链有延迟 延迟一下再去获取\n\n    setAmountSubmitted(0);\n    upDateAll();\n    console.log('质押完成'); // 结束 loading 开始，其实就是控制一个变量为 false\n  }; // 撤出投资\n\n\n  const withdraw = async () => {\n    if (amountSubmitted <= 0) return; // 可以添加 loading 开始，其实就是控制一个变量为 true\n\n    console.log('开始撤出投资');\n    const amount = amountSubmitted;\n\n    if (poolName === 'cornPoolAddress') {\n      await wallet.withdraw(conf.pool[poolName], (amount * 1e18).toString()); // 这里可以监听错误\n    } else {\n      await wallet.withdraw(conf.pool[poolName], (amount * 1e6).toString()); // 这里可以监听错误\n    } // lp 地址可能不需要，但也要传值\n\n\n    await sleep(50); // 区块链有延迟 延迟一下再去获取\n\n    setAmountSubmitted(0);\n    upDateAll();\n    console.log('撤出投资完成'); // 结束 loading 开始，其实就是控制一个变量为 false\n  };\n\n  useEffect(() => {\n    wallet.eventEmitter.on(wallet.eventConstant.wallet_connection, upDateAll); // upDateAll();\n\n    training(); // 轮训\n\n    return () => {\n      wallet.eventEmitter.removeListener(wallet.eventConstant.wallet_connection, upDateAll);\n    };\n  }, []); // 监听输入框的数据\n\n  const inputHandleChange = event => {\n    // let curValue = Number(event.target.value);\n    setAmountSubmitted(event.target.value);\n  };\n\n  const calcAvailable = () => {\n    console.log('lpBalance>>>>>', lpBalance);\n\n    if (popType === 1) {\n      return `可用：${pledged} ${poolTitleName[poolName]}`;\n    } else if (popType === 2) {\n      return `可用：${lpBalance} ${poolTitleName[poolName]}`;\n    }\n  };\n\n  let msg = /*#__PURE__*/React.createElement(\"div\", {\n    className: \"msg-box-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"awaylable-money\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 13\n    }\n  }, calcAvailable()), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"input\",\n    type: \"text\",\n    value: amountSubmitted,\n    onChange: inputHandleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"max-money btn\",\n    onClick: () => {\n      if (popType === 1) {\n        setAmountSubmitted(parseFloat(pledged));\n      } else if (popType === 2) {\n        setAmountSubmitted(parseFloat(lpBalance));\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 17\n    }\n  }, t('detail.max')))));\n\n  function showMsgBox(type) {\n    console.log(type);\n    setPopType(type);\n\n    if (type === 0) {\n      approveAuthor();\n      return;\n    }\n\n    setShow(true);\n  }\n\n  function confirmCallBack(type) {\n    if (type) {\n      if (popType === 1) {\n        if (!/^\\d+(?=\\.{0,1}\\d+$|$)/.test(amountSubmitted)) {\n          setErrorInfo(t('detail.insufficientBalance'));\n          setOpenError(true);\n          return;\n        }\n\n        if (!parseFloat(amountSubmitted)) {\n          setErrorInfo(t('detail.insufficientBalance'));\n          setOpenError(true);\n          return;\n        }\n\n        if (parseFloat(amountSubmitted) > pledged) {\n          setErrorInfo(t('detail.insufficientBalance'));\n          setOpenError(true);\n          return;\n        }\n\n        withdraw();\n      } else {\n        if (!/^\\d+(?=\\.{0,1}\\d+$|$)/.test(amountSubmitted)) {\n          setErrorInfo(t('detail.insufficientBalance'));\n          setOpenError(true);\n          return;\n        }\n\n        if (!parseFloat(amountSubmitted)) {\n          setErrorInfo(t('detail.insufficientBalance'));\n          setOpenError(true);\n          return;\n        }\n\n        if (parseFloat(amountSubmitted) > lpBalance) {\n          setErrorInfo(t('detail.insufficientBalance'));\n          setOpenError(true);\n          return;\n        }\n\n        invest();\n      }\n    } else {\n      setAmountSubmitted(0);\n    }\n\n    setShow(false);\n  }\n\n  let detaiItem;\n\n  if (!isApproved) {\n    detaiItem = /*#__PURE__*/React.createElement(DetailItem, {\n      src: poolTitleImg[poolName],\n      number: pledged,\n      text: poolTitleName[poolName] + t('detail.staked'),\n      btnText: t('detail.feed') + poolTitleName[poolName],\n      onClick: showMsgBox,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 21\n      }\n    });\n  } else {\n    detaiItem = /*#__PURE__*/React.createElement(DetailItem, {\n      src: poolTitleImg[poolName],\n      number: pledged,\n      text: poolTitleName[poolName] + t('detail.staked'),\n      btnText: t('detail.unstake'),\n      btnText2: t('detail.pledge'),\n      onClick: showMsgBox,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 21\n      }\n    });\n  }\n\n  const backGround = {\n    background: `url(${poolTitleImg[poolName]})`,\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: '100%',\n    backgroundPosition: 'center'\n  };\n  let earn = \"\";\n  let earned = \"\";\n\n  if (poolName == \"usdtPoolAddress\" || poolName == \"fomoX9PoolAddress\") {\n    earn = t('detail.earn_fomo');\n    earned = /*#__PURE__*/React.createElement(DetailItem, {\n      src: poolTitleImg[\"fomoTrc20\"],\n      number: obtained,\n      text: t('detail.earned_fomo'),\n      btnText: t('detail.adopt'),\n      onClick: onclickHarvest,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 18\n      }\n    });\n  } else {\n    earn = t('detail.earn_fomox9');\n    earned = /*#__PURE__*/React.createElement(DetailItem, {\n      src: poolTitleImg[\"fomoX9Trc20\"],\n      number: obtained,\n      text: t('detail.earned_fomox9'),\n      btnText: t('detail.adopt'),\n      onClick: onclickHarvest,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 18\n      }\n    });\n  }\n\n  const rendering = () => {\n    if (isLoading) {\n      return /*#__PURE__*/React.createElement(Loading, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 17\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"detai-list\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 21\n        }\n      }, earned, detaiItem), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"detai-btn btn\",\n        onClick: onClickExit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 21\n        }\n      }, t('detail.adoptAndUnstake')));\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"detail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"detail-slogan\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"slogan-logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"slogan-logo-img\",\n    style: backGround,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-logo-text1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 21\n    }\n  }, poolTitleName[poolName])), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"slogan-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 21\n    }\n  }, t('detail.deposit')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"slogan-title-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 21\n    }\n  }, \"\\xA0\", poolTitleName[poolName], \"\\xA0\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 21\n    }\n  }, earn))), rendering(), show && /*#__PURE__*/React.createElement(MsgBox, {\n    msg: msg,\n    title: t('detail.feed2'),\n    popType: popType,\n    confirm: true,\n    confirmCallBack: confirmCallBack,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 22\n    }\n  }), /*#__PURE__*/React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'top',\n      horizontal: 'right'\n    },\n    open: openError,\n    autoHideDuration: 1500,\n    onClose: setOpenError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Alert, {\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 17\n    }\n  }, errorInfo)));\n}\n\nexport default Detail;","map":{"version":3,"sources":["/Users/zhaohongwei/Downloads/fomoswap/src/views/Detail/Detail.js"],"names":["React","useState","useEffect","MuiAlert","Snackbar","DetailItem","MsgBox","Loading","useLocation","useTranslation","tigerLogo","wallet","conf","sleep","getUrlParams","formatBigNumber","poolTitleImg","require","poolTitleName","usdtPoolAddress","fomoPoolAddress","fomoX9PoolAddress","mvmPoolAddress","famPoolAddress","Alert","props","Detail","t","poolName","search","show","setShow","popType","setPopType","obtained","setObtained","pledged","setPledged","isApproved","setApproved","lpBalance","setLpBalance","amountSubmitted","setAmountSubmitted","isLoading","setLoading","openError","setOpenError","errorInfo","setErrorInfo","upDateAll","getDefaultAddress","code","myAddress","data","poolAddress","pool","lpAddress","lp","earnedRes","pledgedRes","allowanceRes","lpRes","Promise","all","_getEarned","_getBalanceOf","allowance","Number","comparedTo","onclickHarvest","console","log","getReward","training","err","error","onClickExit","exit","approveAuthor","approve","invest","amount","safeInvest","withdraw","toString","eventEmitter","on","eventConstant","wallet_connection","removeListener","inputHandleChange","event","target","value","calcAvailable","msg","parseFloat","showMsgBox","type","confirmCallBack","test","detaiItem","backGround","background","backgroundRepeat","backgroundSize","backgroundPosition","earn","earned","rendering","vertical","horizontal"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\r\n\r\nimport MuiAlert from '@material-ui/lab/Alert'\r\nimport Snackbar from '@material-ui/core/Snackbar'\r\n\r\nimport DetailItem from '../../components/DetailItem/DetailItem'\r\nimport MsgBox from '../../components/MsgBox/MsgBox'\r\n\r\nimport Loading from '../../components/Loading'\r\n\r\nimport {useLocation} from 'react-router-dom'\r\nimport {useTranslation} from 'react-i18next'\r\n\r\n// import tigerLogo from '../../assets/tiger-logo.png';\r\nimport tigerLogo from '../../assets/1.png'\r\n\r\nimport wallet from '../../tools/wallet'\r\nimport conf from '../../tools/conf'\r\n\r\nimport {sleep, getUrlParams, formatBigNumber} from '../../tools'\r\n\r\nimport './Detail.css'\r\n\r\nconst {poolTitleImg} = require('../../assets/converge')\r\n\r\n// 池子标题名字\r\nconst poolTitleName = {\r\n    usdtPoolAddress:   'USDT/TRX LP',\r\n    fomoPoolAddress:   'FOMO/TRX LP',\r\n    fomoX9PoolAddress: 'FOMOX9/TRX LP',\r\n    mvmPoolAddress:    'MVM/TRX LP',\r\n    famPoolAddress:    'FAM/TRX LP'\r\n}\r\n\r\nfunction Alert(props) {\r\n    return <MuiAlert elevation={6} variant=\"filled\" {...props} />\r\n}\r\n\r\nfunction Detail() {\r\n\r\n    const {t} = useTranslation()\r\n\r\n    // 使用这个变量去区分是哪个池子，个性化设置等、比如图标之类\r\n    // 真不理解为什么不用 pollName 这个变量去做，非要再处理个 src 属性\r\n    const {poolName} = getUrlParams(useLocation().search)\r\n\r\n    const [show, setShow]       = useState(false)\r\n    const [popType, setPopType] = useState(0) // 根据状态去判断当前功能、0 批准，1 解压，2质押\r\n\r\n    const [obtained, setObtained] = useState(0) // 已获得\r\n    const [pledged, setPledged]   = useState(0) // 已抵押\r\n\r\n    // 是否批准，根据 isApproved 这个变量显示显示几个按钮，为 false 一个按钮， true 为两个按钮\r\n    const [isApproved, setApproved] = useState(false)\r\n\r\n    const [lpBalance, setLpBalance] = useState(0) // lp 余额\r\n\r\n    const [amountSubmitted, setAmountSubmitted] = useState(0) // 提交的金额\r\n    const [isLoading, setLoading]               = useState(true) // 加载状态\r\n\r\n    const [openError, setOpenError] = React.useState(false) // 错误提示\r\n    const [errorInfo, setErrorInfo] = React.useState('This is a error!') // 错误提信息\r\n\r\n    // 一起更新所有吧\r\n    const upDateAll = async () => {\r\n\r\n        if (wallet.getDefaultAddress().code === 0) {\r\n\r\n            const myAddress   = wallet.getDefaultAddress().data\r\n            const poolAddress = conf.pool[poolName]\r\n            const lpAddress   = conf.lp[poolName]\r\n// console.log(myAddress)\r\n// console.log(poolAddress)\r\n// console.log(lpAddress)\r\n            const [earnedRes, pledgedRes, allowanceRes, lpRes] = await Promise.all([\r\n                wallet._getEarned(poolAddress),\r\n                wallet._getBalanceOf(poolAddress, myAddress),\r\n                wallet.allowance(lpAddress, myAddress, poolAddress),\r\n                wallet._getBalanceOf(lpAddress, myAddress),\r\n            ])\r\n\r\n            setObtained(formatBigNumber(earnedRes.data))\r\n\r\n            // if (poolName === 'cornPoolAddress') {\r\n            //     setPledged((Number(formatBigNumber(pledgedRes.data, 1e18))));\r\n            //     setLpBalance((Number(formatBigNumber(lpRes.data, 1e18))));\r\n            // } else {\r\n            //     setPledged(Number(formatBigNumber(pledgedRes.data, 1e6)));\r\n            //     setLpBalance(Number(formatBigNumber(lpRes.data, 1e6)));\r\n            // }\r\n            setPledged(Number(formatBigNumber(pledgedRes.data, 1e6)))\r\n            setLpBalance(Number(formatBigNumber(lpRes.data, 1e6)))\r\n\r\n            if (allowanceRes.data.comparedTo(1) > 0) {\r\n                setApproved(true)\r\n            } else {\r\n                setApproved(false)\r\n            }\r\n\r\n            setLoading(false)\r\n\r\n        } else {\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // 收割\r\n    const onclickHarvest = async () => {\r\n        if (Number(obtained) > 0) {\r\n\r\n            // 可以添加 loading 开始，其实就是控制一个变量为 true\r\n            console.log('开始收割')\r\n\r\n            await wallet.getReward(conf.pool[poolName]) // 这里可以监听错误\r\n\r\n            console.log('收割完成')\r\n            // 结束 loading 开始，其实就是控制一个变量为 false\r\n        }\r\n    }\r\n\r\n    // 轮训，更新，10 秒更新一次\r\n    const training = async () => {\r\n\r\n        await sleep(20 * 1000)\r\n\r\n        for (; ;) {\r\n            try {\r\n                await sleep(8 * 1000)\r\n                await upDateAll()\r\n            } catch (err) {\r\n                console.error(err)\r\n            }\r\n        }\r\n    }\r\n\r\n    // 收割并解压\r\n    const onClickExit = async () => {\r\n\r\n        if (obtained <= 0) {\r\n            console.log('数量不足')\r\n            // return;\r\n        } else {\r\n            console.log('return')\r\n        }\r\n\r\n        // 可以添加 loading 开始，其实就是控制一个变量为 true\r\n        console.log('开始收割并解压')\r\n\r\n        await wallet.exit(conf.pool[poolName]) // 这里可以监听错误\r\n\r\n        upDateAll()\r\n        console.log('收割并解压完成')\r\n        // 结束 loading 开始，其实就是控制一个变量为 false\r\n    }\r\n\r\n    // 批准授权\r\n    const approveAuthor = async () => {\r\n\r\n        try {\r\n            // 可以添加 loading 开始，其实就是控制一个变量为 true\r\n            console.log('开始批准授权')\r\n\r\n            await wallet.approve(conf.lp[poolName], conf.pool[poolName]) // 这里可以监听错误\r\n\r\n            upDateAll()\r\n            console.log('批准授权完成')\r\n            // 结束 loading 开始，其实就是控制一个变量为 false\r\n        } catch (err) {\r\n            console.error(err)\r\n        }\r\n\r\n    }\r\n\r\n    // 质押\r\n    const invest = async () => {\r\n\r\n        if (amountSubmitted <= 0) return\r\n\r\n        // 可以添加 loading 开始，其实就是控制一个变量为 true\r\n        console.log('开始质押>>>', amountSubmitted)\r\n\r\n        const amount = amountSubmitted\r\n\r\n        // if (poolName === 'cornPoolAddress') {\r\n        //     await wallet.safeInvest(conf.pool[poolName], conf.lp[poolName], (amount * 1e18)); // 这里可以监听错误\r\n        // } else {\r\n        //     await wallet.safeInvest(conf.pool[poolName], conf.lp[poolName], (amount * 1e6)); // 这里可以监听错误\r\n        // }\r\n        await wallet.safeInvest(conf.pool[poolName], conf.lp[poolName], (amount * 1e6)) // 这里可以监听错误\r\n        // lp 地址可能不需要，但也要传值\r\n\r\n        await sleep(50) // 区块链有延迟 延迟一下再去获取\r\n        setAmountSubmitted(0)\r\n        upDateAll()\r\n\r\n        console.log('质押完成')\r\n        // 结束 loading 开始，其实就是控制一个变量为 false\r\n    }\r\n\r\n    // 撤出投资\r\n    const withdraw = async () => {\r\n\r\n        if (amountSubmitted <= 0) return\r\n\r\n        // 可以添加 loading 开始，其实就是控制一个变量为 true\r\n        console.log('开始撤出投资')\r\n\r\n        const amount = amountSubmitted\r\n\r\n        if (poolName === 'cornPoolAddress') {\r\n            await wallet.withdraw(conf.pool[poolName], (amount * 1e18).toString()) // 这里可以监听错误\r\n\r\n        } else {\r\n            await wallet.withdraw(conf.pool[poolName], (amount * 1e6).toString()) // 这里可以监听错误\r\n        }\r\n        // lp 地址可能不需要，但也要传值\r\n\r\n        await sleep(50) // 区块链有延迟 延迟一下再去获取\r\n        setAmountSubmitted(0)\r\n\r\n        upDateAll()\r\n        console.log('撤出投资完成')\r\n        // 结束 loading 开始，其实就是控制一个变量为 false\r\n    }\r\n\r\n    useEffect(() => {\r\n        wallet.eventEmitter.on(wallet.eventConstant.wallet_connection, upDateAll)\r\n\r\n        // upDateAll();\r\n        training() // 轮训\r\n\r\n        return () => {\r\n            wallet.eventEmitter.removeListener(wallet.eventConstant.wallet_connection, upDateAll)\r\n        }\r\n    }, [])\r\n\r\n    // 监听输入框的数据\r\n    const inputHandleChange = (event) => {\r\n\r\n        // let curValue = Number(event.target.value);\r\n\r\n        setAmountSubmitted(event.target.value)\r\n    }\r\n\r\n    const calcAvailable = () => {\r\n        console.log('lpBalance>>>>>', lpBalance)\r\n        if (popType === 1) {\r\n            return `可用：${pledged} ${poolTitleName[poolName]}`\r\n        } else if (popType === 2) {\r\n            return `可用：${lpBalance} ${poolTitleName[poolName]}`\r\n        }\r\n    }\r\n\r\n    let msg = <div className=\"msg-box-body\">\r\n        <div>\r\n            <div className=\"awaylable-money\">{calcAvailable()}</div>\r\n            <div className=\"input-box\">\r\n                <input className=\"input\" type=\"text\" value={amountSubmitted} onChange={inputHandleChange}/>\r\n                <div className=\"max-money btn\" onClick={() => {\r\n                    if (popType === 1) {\r\n                        setAmountSubmitted(parseFloat(pledged))\r\n                    } else if (popType === 2) {\r\n                        setAmountSubmitted(parseFloat(lpBalance))\r\n                    }\r\n                }}>{t('detail.max')}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    function showMsgBox(type) {\r\n\r\n        console.log(type)\r\n        setPopType(type)\r\n\r\n        if (type === 0) {\r\n            approveAuthor()\r\n            return\r\n        }\r\n\r\n        setShow(true)\r\n    }\r\n\r\n    function confirmCallBack(type) {\r\n        if (type) {\r\n            if (popType === 1) {\r\n\r\n                if (!(/^\\d+(?=\\.{0,1}\\d+$|$)/.test(amountSubmitted))) {\r\n                    setErrorInfo(t('detail.insufficientBalance'))\r\n                    setOpenError(true)\r\n                    return\r\n                }\r\n\r\n                if (!parseFloat(amountSubmitted)) {\r\n                    setErrorInfo(t('detail.insufficientBalance'))\r\n                    setOpenError(true)\r\n                    return\r\n                }\r\n                if (parseFloat(amountSubmitted) > pledged) {\r\n                    setErrorInfo(t('detail.insufficientBalance'))\r\n                    setOpenError(true)\r\n                    return\r\n                }\r\n                withdraw()\r\n            } else {\r\n                if (!(/^\\d+(?=\\.{0,1}\\d+$|$)/.test(amountSubmitted))) {\r\n                    setErrorInfo(t('detail.insufficientBalance'))\r\n                    setOpenError(true)\r\n                    return\r\n                }\r\n\r\n                if (!parseFloat(amountSubmitted)) {\r\n                    setErrorInfo(t('detail.insufficientBalance'))\r\n                    setOpenError(true)\r\n                    return\r\n                }\r\n                if (parseFloat(amountSubmitted) > lpBalance) {\r\n                    setErrorInfo(t('detail.insufficientBalance'))\r\n                    setOpenError(true)\r\n                    return\r\n                }\r\n                invest()\r\n            }\r\n        } else {\r\n            setAmountSubmitted(0)\r\n        }\r\n        setShow(false)\r\n    }\r\n\r\n    let detaiItem\r\n    if (!isApproved) {\r\n        detaiItem = <DetailItem src={poolTitleImg[poolName]} number={pledged}\r\n                                text={poolTitleName[poolName] + t('detail.staked')}\r\n                                btnText={t('detail.feed') + poolTitleName[poolName]} onClick={showMsgBox}/>\r\n    } else {\r\n        detaiItem = <DetailItem src={poolTitleImg[poolName]} number={pledged}\r\n                                text={poolTitleName[poolName] + t('detail.staked')} btnText={t('detail.unstake')}\r\n                                btnText2={t('detail.pledge')} onClick={showMsgBox}/>\r\n    }\r\n\r\n    const backGround = {\r\n        background:         `url(${poolTitleImg[poolName]})`,\r\n        backgroundRepeat:   'no-repeat',\r\n        backgroundSize:     '100%',\r\n        backgroundPosition: 'center'\r\n    }\r\n\r\n    let earn   = \"\"\r\n    let earned = \"\"\r\n\r\n    if (poolName == \"usdtPoolAddress\" || poolName == \"fomoX9PoolAddress\") {\r\n        earn   = t('detail.earn_fomo')\r\n        earned = <DetailItem src={poolTitleImg[\"fomoTrc20\"]} number={obtained} text={t('detail.earned_fomo')}\r\n                             btnText={t('detail.adopt')} onClick={onclickHarvest}/>\r\n    } else {\r\n        earn   = t('detail.earn_fomox9')\r\n        earned = <DetailItem src={poolTitleImg[\"fomoX9Trc20\"]} number={obtained} text={t('detail.earned_fomox9')}\r\n                             btnText={t('detail.adopt')} onClick={onclickHarvest}/>\r\n    }\r\n\r\n    const rendering = () => {\r\n        if (isLoading) {\r\n            return (\r\n                <Loading/>\r\n            )\r\n        } else {\r\n            return (\r\n                <>\r\n                    <div className=\"detai-list\">\r\n                        {earned}\r\n                        {detaiItem}\r\n                    </div>\r\n\r\n                    <div className=\"detai-btn btn\" onClick={onClickExit}>{t('detail.adoptAndUnstake')}</div>\r\n                </>\r\n            )\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"detail\">\r\n            <div className=\"detail-slogan\">\r\n                <div className=\"slogan-logo\">\r\n                    <div className=\"slogan-logo-img\" style={backGround}></div>\r\n                </div>\r\n\r\n                <div className=\"text-logo\">\r\n                    <div className=\"text-logo-text1\">{poolTitleName[poolName]}</div>\r\n                </div>\r\n                <div className=\"slogan-title\">\r\n                    <div>{t('detail.deposit')}</div>\r\n                    <div className=\"slogan-title-name\">&nbsp;{poolTitleName[poolName]}&nbsp;</div>\r\n                    <div>{earn}</div>\r\n                </div>\r\n            </div>\r\n            {rendering()}\r\n            {show && <MsgBox msg={msg} title={t('detail.feed2')} popType={popType} confirm={true}\r\n                             confirmCallBack={confirmCallBack}/>}\r\n\r\n            <Snackbar\r\n                anchorOrigin={{vertical: 'top', horizontal: 'right'}}\r\n                open={openError}\r\n                autoHideDuration={1500}\r\n                onClose={setOpenError}>\r\n                <Alert severity=\"error\">\r\n                    {errorInfo}\r\n                </Alert>\r\n            </Snackbar>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Detail\r\n"]},"metadata":{},"sourceType":"module"}