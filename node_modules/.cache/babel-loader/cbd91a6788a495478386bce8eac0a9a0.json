{"ast":null,"code":"var _jsxFileName = \"/Users/zhaohongwei/Downloads/fomoswap/src/views/Home/Home.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport Slogan from '../../components/Slogan/Slogan';\nimport StatisticsInfo from '../../components/StatisticsInfo/StatisticsInfo';\nimport wallet from '../../tools/wallet';\nimport { formatBigNumber } from '../../tools';\nimport './Home.css';\nimport conf from '../../tools/conf';\n\nfunction Home() {\n  const {\n    t\n  } = useTranslation();\n  const [myNum, setMyNum] = useState(0);\n  const [myNum1, setMyNum1] = useState(0);\n  const [totalNum, setTotalNum] = useState(0);\n  const [totalNum1, setTotalNum1] = useState(0); // const upDateTotalNum = async () => {\n  //\n  //     if (wallet.getDefaultAddress().code !== 0) {\n  //         return\n  //     }\n  //\n  //     const result = await wallet._getTotalSupply(conf.tigerAddress)\n  //\n  //     if (result.code === 0) {\n  //         // setTotalNum(formatBigNumber(result.data)) // 保留两位小数\n  //     } else {\n  //\n  //     }\n  // }\n\n  const upDateMyNum = async () => {\n    if (wallet.getDefaultAddress().code !== 0) {\n      return;\n    }\n\n    const result = await wallet._getBalanceOf(conf.fomoAddress, wallet.getDefaultAddress().data);\n\n    if (result.code === 0) {\n      setMyNum(formatBigNumber(result.data)); // 保留两位小数\n    } else {}\n  };\n\n  const upDateMyNum1 = async () => {\n    if (wallet.getDefaultAddress().code !== 0) {\n      return;\n    }\n\n    const result = await wallet._getBalanceOf(conf.fomox9Address, wallet.getDefaultAddress().data);\n\n    if (result.code === 0) {\n      setMyNum1(formatBigNumber(result.data)); // 保留两位小数\n    } else {}\n  };\n\n  const readMint = async () => {\n    let total = 0;\n    let currentUnixtime = new Date().getTime();\n    let usdtStartAt = await wallet.readMint(conf.pool.usdtPoolAddress);\n    let usdtRewardRate = await wallet.rewardRate(conf.pool.usdtPoolAddress);\n    let usdtTotal = Math.floor((currentUnixtime - usdtStartAt * 1000) / 1000 * (usdtRewardRate / 1e18));\n\n    if (usdtTotal > 0) {\n      total = usdtTotal;\n    }\n\n    let fomoX9StartAt = await wallet.readMint(conf.pool.fomoX9PoolAddress);\n    let fomoX9RewardRate = await wallet.rewardRate(conf.pool.fomoX9PoolAddress);\n    let fomoX9Total = Math.floor((currentUnixtime - fomoX9StartAt * 1000) / 1000 * (fomoX9RewardRate / 1e18));\n\n    if (fomoX9Total > 0) {\n      total = total + fomoX9Total;\n    }\n\n    setTotalNum(total);\n    let fomoStartAt = await wallet.readMint(conf.pool.fomoPoolAddress);\n    let fomoRewardRate = await wallet.rewardRate(conf.pool.fomoPoolAddress);\n    let fomoTotal = Math.floor((currentUnixtime - fomoStartAt * 1000) / 1000 * (fomoRewardRate / 1e18));\n\n    if (fomoTotal > 0) {\n      total = fomoTotal;\n    }\n\n    let mvmStartAt = await wallet.readMint(conf.pool.mvmPoolAddress);\n    let mvmRewardRate = await wallet.rewardRate(conf.pool.mvmPoolAddress);\n    let mvmTotal = Math.floor((currentUnixtime - mvmStartAt * 1000) / 1000 * (mvmRewardRate / 1e18));\n\n    if (mvmTotal > 0) {\n      total = total + mvmTotal;\n    }\n\n    let famStartAt = await wallet.readMint(conf.pool.famPoolAddress);\n    let famRewardRate = await wallet.rewardRate(conf.pool.famPoolAddress);\n    let famTotal = Math.floor((currentUnixtime - famStartAt * 1000) / 1000 * (famRewardRate / 1e18));\n\n    if (famTotal > 0) {\n      total = total + famTotal;\n    }\n\n    setTotalNum1(total); // let startAt         = await wallet.readMint(conf.pool.fomoPoolAddress)\n    // let rewardRate      = await wallet.rewardRate(conf.pool.fomoPoolAddress)\n    //\n    // total = Math.floor(((currentUnixtime - (startAt * 1000)) / 1000) * (rewardRate / 1e18))\n    //\n    // if (total < 0) {\n    //     total = 0\n    // }\n    //\n    // setTotalNum(\n    //     total\n    // ) // 保留两位小数\n    //\n    // startAt    = await wallet.readMint(conf.pool.fomoX9PoolAddress)\n    // rewardRate = await wallet.rewardRate(conf.pool.fomoX9PoolAddress)\n    //\n    // total = Math.floor(((currentUnixtime - (startAt * 1000)) / 1000) * (rewardRate / 1e18))\n    //\n    // if (total < 0) {\n    //     total = 0\n    // }\n    //\n    // setTotalNum1(\n    //     total\n    // ) // 保留两位小数\n  };\n\n  useEffect(() => {\n    wallet.eventEmitter.on(wallet.eventConstant.wallet_connection, upDateMyNum);\n    wallet.eventEmitter.on(wallet.eventConstant.wallet_connection, upDateMyNum1);\n    wallet.eventEmitter.on(wallet.eventConstant.wallet_connection, readMint); // upDateTotalNum()\n    // upDateMyNum()\n    // readMint()\n\n    setInterval(() => {\n      upDateMyNum();\n      upDateMyNum1();\n      readMint();\n      console.log(\"update ui\");\n    }, 20 * 1000);\n    return () => {\n      // wallet.eventEmitter.removeListener(wallet.eventConstant.wallet_connection, upDateTotalNum)\n      wallet.eventEmitter.removeListener(wallet.eventConstant.wallet_connection, upDateMyNum);\n      wallet.eventEmitter.removeListener(wallet.eventConstant.wallet_connection, upDateMyNum1);\n      wallet.eventEmitter.removeListener(wallet.eventConstant.wallet_connection, readMint);\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"home\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Slogan, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"statistics\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(StatisticsInfo, {\n    name: \"balance\",\n    number: myNum,\n    text: t('home.balance'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(StatisticsInfo, {\n    name: \"balance1\",\n    number: myNum1,\n    text: t('home.balance1'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"statistics\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(StatisticsInfo, {\n    name: \"supply\",\n    number: totalNum,\n    text: t('home.supply'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(StatisticsInfo, {\n    name: \"supply1\",\n    number: totalNum1,\n    text: t('home.supply1'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/menu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"goto-menu-btn btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 21\n    }\n  }, t('home.see'))), /*#__PURE__*/React.createElement(\"a\", {\n    target: \"__blank\",\n    href: \"https://invite.fomoswap.me\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"goto-menu-btn btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 21\n    }\n  }, t('home.see2')))));\n}\n\nexport default Home;","map":{"version":3,"sources":["/Users/zhaohongwei/Downloads/fomoswap/src/views/Home/Home.js"],"names":["React","useState","useEffect","Link","useTranslation","Slogan","StatisticsInfo","wallet","formatBigNumber","conf","Home","t","myNum","setMyNum","myNum1","setMyNum1","totalNum","setTotalNum","totalNum1","setTotalNum1","upDateMyNum","getDefaultAddress","code","result","_getBalanceOf","fomoAddress","data","upDateMyNum1","fomox9Address","readMint","total","currentUnixtime","Date","getTime","usdtStartAt","pool","usdtPoolAddress","usdtRewardRate","rewardRate","usdtTotal","Math","floor","fomoX9StartAt","fomoX9PoolAddress","fomoX9RewardRate","fomoX9Total","fomoStartAt","fomoPoolAddress","fomoRewardRate","fomoTotal","mvmStartAt","mvmPoolAddress","mvmRewardRate","mvmTotal","famStartAt","famPoolAddress","famRewardRate","famTotal","eventEmitter","on","eventConstant","wallet_connection","setInterval","console","log","removeListener"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport {Link} from 'react-router-dom'\r\n\r\nimport {useTranslation} from 'react-i18next'\r\n\r\nimport Slogan from '../../components/Slogan/Slogan'\r\nimport StatisticsInfo from '../../components/StatisticsInfo/StatisticsInfo'\r\n\r\nimport wallet from '../../tools/wallet'\r\nimport {formatBigNumber} from '../../tools'\r\n\r\nimport './Home.css'\r\nimport conf from '../../tools/conf'\r\n\r\nfunction Home() {\r\n\r\n    const {t} = useTranslation()\r\n\r\n    const [myNum, setMyNum]         = useState(0)\r\n    const [myNum1, setMyNum1]       = useState(0)\r\n    const [totalNum, setTotalNum]   = useState(0)\r\n    const [totalNum1, setTotalNum1] = useState(0)\r\n\r\n    // const upDateTotalNum = async () => {\r\n    //\r\n    //     if (wallet.getDefaultAddress().code !== 0) {\r\n    //         return\r\n    //     }\r\n    //\r\n    //     const result = await wallet._getTotalSupply(conf.tigerAddress)\r\n    //\r\n    //     if (result.code === 0) {\r\n    //         // setTotalNum(formatBigNumber(result.data)) // 保留两位小数\r\n    //     } else {\r\n    //\r\n    //     }\r\n    // }\r\n\r\n    const upDateMyNum = async () => {\r\n\r\n        if (wallet.getDefaultAddress().code !== 0) {\r\n            return\r\n        }\r\n\r\n        const result = await wallet._getBalanceOf(conf.fomoAddress, wallet.getDefaultAddress().data)\r\n\r\n        if (result.code === 0) {\r\n            setMyNum(formatBigNumber(result.data)) // 保留两位小数\r\n        } else {\r\n\r\n        }\r\n    }\r\n\r\n    const upDateMyNum1 = async () => {\r\n\r\n        if (wallet.getDefaultAddress().code !== 0) {\r\n            return\r\n        }\r\n\r\n        const result = await wallet._getBalanceOf(conf.fomox9Address, wallet.getDefaultAddress().data)\r\n\r\n        if (result.code === 0) {\r\n            setMyNum1(formatBigNumber(result.data)) // 保留两位小数\r\n        } else {\r\n\r\n        }\r\n    }\r\n\r\n    const readMint = async () => {\r\n        let total           = 0\r\n        let currentUnixtime = new Date().getTime()\r\n\r\n        let usdtStartAt    = await wallet.readMint(conf.pool.usdtPoolAddress)\r\n        let usdtRewardRate = await wallet.rewardRate(conf.pool.usdtPoolAddress)\r\n        let usdtTotal      = Math.floor(((currentUnixtime - (usdtStartAt * 1000)) / 1000) * (usdtRewardRate / 1e18))\r\n\r\n        if (usdtTotal > 0) {\r\n            total = usdtTotal\r\n        }\r\n\r\n        let fomoX9StartAt    = await wallet.readMint(conf.pool.fomoX9PoolAddress)\r\n        let fomoX9RewardRate = await wallet.rewardRate(conf.pool.fomoX9PoolAddress)\r\n        let fomoX9Total      = Math.floor(((currentUnixtime - (fomoX9StartAt * 1000)) / 1000) * (fomoX9RewardRate / 1e18))\r\n\r\n        if (fomoX9Total > 0) {\r\n            total = total + fomoX9Total\r\n        }\r\n\r\n        setTotalNum(total)\r\n\r\n        let fomoStartAt    = await wallet.readMint(conf.pool.fomoPoolAddress)\r\n        let fomoRewardRate = await wallet.rewardRate(conf.pool.fomoPoolAddress)\r\n        let fomoTotal      = Math.floor(((currentUnixtime - (fomoStartAt * 1000)) / 1000) * (fomoRewardRate / 1e18))\r\n\r\n        if (fomoTotal > 0) {\r\n            total = fomoTotal\r\n        }\r\n\r\n        let mvmStartAt    = await wallet.readMint(conf.pool.mvmPoolAddress)\r\n        let mvmRewardRate = await wallet.rewardRate(conf.pool.mvmPoolAddress)\r\n        let mvmTotal      = Math.floor(((currentUnixtime - (mvmStartAt * 1000)) / 1000) * (mvmRewardRate / 1e18))\r\n\r\n        if (mvmTotal > 0) {\r\n            total = total + mvmTotal\r\n        }\r\n\r\n        let famStartAt    = await wallet.readMint(conf.pool.famPoolAddress)\r\n        let famRewardRate = await wallet.rewardRate(conf.pool.famPoolAddress)\r\n        let famTotal      = Math.floor(((currentUnixtime - (famStartAt * 1000)) / 1000) * (famRewardRate / 1e18))\r\n\r\n        if (famTotal > 0) {\r\n            total = total + famTotal\r\n        }\r\n\r\n        setTotalNum1(total)\r\n\r\n        // let startAt         = await wallet.readMint(conf.pool.fomoPoolAddress)\r\n        // let rewardRate      = await wallet.rewardRate(conf.pool.fomoPoolAddress)\r\n        //\r\n        // total = Math.floor(((currentUnixtime - (startAt * 1000)) / 1000) * (rewardRate / 1e18))\r\n        //\r\n        // if (total < 0) {\r\n        //     total = 0\r\n        // }\r\n        //\r\n        // setTotalNum(\r\n        //     total\r\n        // ) // 保留两位小数\r\n        //\r\n        // startAt    = await wallet.readMint(conf.pool.fomoX9PoolAddress)\r\n        // rewardRate = await wallet.rewardRate(conf.pool.fomoX9PoolAddress)\r\n        //\r\n        // total = Math.floor(((currentUnixtime - (startAt * 1000)) / 1000) * (rewardRate / 1e18))\r\n        //\r\n        // if (total < 0) {\r\n        //     total = 0\r\n        // }\r\n        //\r\n        // setTotalNum1(\r\n        //     total\r\n        // ) // 保留两位小数\r\n    }\r\n\r\n    useEffect(() => {\r\n        wallet.eventEmitter.on(wallet.eventConstant.wallet_connection, upDateMyNum)\r\n        wallet.eventEmitter.on(wallet.eventConstant.wallet_connection, upDateMyNum1)\r\n        wallet.eventEmitter.on(wallet.eventConstant.wallet_connection, readMint)\r\n\r\n        // upDateTotalNum()\r\n        // upDateMyNum()\r\n        // readMint()\r\n        setInterval(() => {\r\n            upDateMyNum()\r\n            upDateMyNum1()\r\n            readMint()\r\n\r\n            console.log(\"update ui\")\r\n        }, 20 * 1000)\r\n\r\n        return () => {\r\n            // wallet.eventEmitter.removeListener(wallet.eventConstant.wallet_connection, upDateTotalNum)\r\n            wallet.eventEmitter.removeListener(wallet.eventConstant.wallet_connection, upDateMyNum)\r\n            wallet.eventEmitter.removeListener(wallet.eventConstant.wallet_connection, upDateMyNum1)\r\n            wallet.eventEmitter.removeListener(wallet.eventConstant.wallet_connection, readMint)\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"home\">\r\n            <Slogan/>\r\n\r\n            <div className=\"statistics\">\r\n                <StatisticsInfo name=\"balance\" number={myNum} text={t('home.balance')}/>\r\n                <StatisticsInfo name=\"balance1\" number={myNum1} text={t('home.balance1')}/>\r\n                {/*<StatisticsInfo name=\"balance\" number={0} text={t('home.balance')}/>*/}\r\n                {/*<StatisticsInfo name=\"balance1\" number={0} text={t('home.balance1')}/>*/}\r\n            </div>\r\n\r\n            <div className=\"statistics\">\r\n                <StatisticsInfo name=\"supply\" number={totalNum} text={t('home.supply')}/>\r\n                <StatisticsInfo name=\"supply1\" number={totalNum1} text={t('home.supply1')}/>\r\n                {/*<StatisticsInfo name=\"supply\" number={0} text={t('home.supply')}/>*/}\r\n                {/*<StatisticsInfo name=\"supply1\" number={0} text={t('home.supply1')}/>*/}\r\n            </div>\r\n\r\n            <div className=\"buttons\">\r\n                <Link to=\"/menu\">\r\n                    <div className=\"goto-menu-btn btn\">{t('home.see')}</div>\r\n                </Link>\r\n\r\n                <a target=\"__blank\" href=\"https://invite.fomoswap.me\">\r\n                    <div className=\"goto-menu-btn btn\">{t('home.see2')}</div>\r\n                </a>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home\r\n"]},"metadata":{},"sourceType":"module"}